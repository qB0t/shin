# Схемы взаимодействия

Возможны следующие схемы взаимодействия:

<table border="0" align="center">
  <tr>
    <th rowspan="2">Схема</th>
    <th colspan="3" align="center">Предоплата</th>
    <th rowspan="2">Изменение заказа</th>
  </tr>
  <tr>
    <th>Партнёр</th>
    <th>Рево</th>
    <th>Отсутствует</th>
  </tr>
  <tr>
    <td>Факторинг 1</td>
    <td>х</td>
    <td></td>
    <td></td>
    <td>х</td>
  </tr>
  <tr>
    <td>Факторинг 2</td>
    <td></td>
    <td>x</td>
    <td></td>
    <td>х</td>
  </tr>
  <tr>
    <td><a href="http://localhost:4567/#3">Факторинг 3</a></td>
    <td></td>
    <td></td>
    <td>x</td>
    <td>х</td>
  </tr>
  <tr>
    <td>Факторинг 4</td>
    <td>х</td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Факторинг 5</td>
    <td></td>
    <td>x</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Факторинг 6</td>
    <td></td>
    <td></td>
    <td>x</td>
    <td></td>
  </tr>
</table>

## Факторинг 1

## Факторинг 2

## Факторинг 3

1. Клиент переходит к оформлению заказа на сайте партнёра и выбирает способ оплаты "оплата частями РЕВО". При переходе на следующий шаг оформления происходит отображение поп-апа Рево, ссылка на который получается с помощью метода <a href="#Checkout">`Checkout`</a>. В этом поп-апе клиент аутентифицируется (или регистрируется, если это новый для Рево клиент), и совершает оформление оплаты частями. В случае успешного завершения поп-апа, клиенту отображается финальная страница `redirect_url` успешного оформления заказ на сайте партнёра.

2. На стороне партнёра формируется предварительный заказ с тем же `order_id`, который использовался для вызова формы Рево.

3. В системе Рево заявка переводится в статус hold (блокировка средств) на срок `valid_till`. Если заказ не будет финализирован с помощью метода <a href="#finish">`Finish`</a> до этого срока, то заявка будет отменена.

4. Колл-центр партнёра связывается с клиентом для подтверждения или корректировки заказа.<BR>
4.1 Если сумма заказа изменилась и превышает лимит, необходимо отменить заявку с помощью метода <a href="#Cancel">`Cancel`</a> и предложить клиенту оплатить заказ другим способом.<BR>
4.2 Если сумма заказа изменилась в пределах лимита, то необходимо передать обновлённую информацию о заказе с помощью метода <a href="#Change">`Change`</a>.<BR>

5. При необходимости, на стороне партнёра происходит подготовка и сбор заказа, после чего с клиентом согласовывается дата и время доставки.

<img src="images/F3.png">

## Факторинг 4

## Факторинг 5

## Факторинг 6
